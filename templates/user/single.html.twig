{% extends 'main.html.twig' %}

{% block title %}Użytkownik{% endblock %}

{% block main_content %}
    <table class="table">
        <tbody>
            <tr>
                <th>Nazwa użytkownika</th>
                <td>{{ user.username }}</td>
            </tr>
            <tr>
                <th>Przypięta osoba</th>
                <td>
                    {{ user.person ? user.person.fullName : '<em class="text-black-50">brak</em>' }}
                    {% if is_granted(constant('\\App\\Security\\Voter\\UserVoter::BIND_WITH_PERSON'), user) %}
                        {{ include('user/_buttons/bind_with_person.html.twig', {path: 'user_bind_with_person', parameters: {'user_id': user.id}}) }}
                    {% endif %}
                </td>
            </tr>
        </tbody>
    </table>

    {% if is_granted(constant('\\App\\Security\\Voter\\UserVoter::LIST')) %}
        <a href="{{ path('users_front') }}" class="btn btn-outline-secondary icon-cancel" title="Wróć do listy">Wróć do listy</a>
    {% endif %}

    {% if is_granted(constant('\\App\\Security\\Voter\\UserVoter::EDIT'), user) %}
        {{ include('buttons/edit_lg.html.twig', {path: 'user_edit', parameters: {'user_id': user.id}}) }}
    {% endif %}

    {% if is_granted(constant('\\App\\Security\\Voter\\UserVoter::IMPERSONATE'), user) %}
        {{ include('user/_buttons/impersonate_lg.html.twig', {path: 'front', parameters: {'_switch_user': user.userIdentifier}}) }}
    {% endif %}
{% endblock %}
